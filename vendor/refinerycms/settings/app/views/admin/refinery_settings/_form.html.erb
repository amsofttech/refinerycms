<%= form_for [:admin, @refinery_setting] do |f| %>

  <%= render :partial => "/shared/admin/error_messages",
             :locals => {
               :object => @refinery_setting,
               :include_object_name => true
             } %>

  <div class='field'>
    <%= f.label :name %>
  <% if action_name =~ /(new)|(create)/ %>
    <%= f.text_field :name, :class => "larger widest" %>
  <% else %>
    <label class='stripped' for='refinery_setting_value'>
      <%= @refinery_setting.name.titleize %>
    </label>
    <span class="preview">- (<%= @refinery_setting.name %>)</span>
  <% end %>
  <% if current_user.has_role?(:superuser)%>
    <div class='field'>
      <%= f.label :form_value_type %>
      <%= f.select :form_value_type, RefinerySetting::FORM_VALUE_TYPES -%>
    </div>
  <% end %>
  <% unless action_name =~ /(new)|(create)/ or (help = t(".help.#{@refinery_setting.name}", :default => '')).blank? or @refinery_setting.form_value_type == 'check_box'  %>
    <p>
      <span><%= help %></span>
    </p>
  <% end %>
  <% if current_user.has_role?(:superuser) %>
    <span class='label_with_help'>
      <%= f.label :restricted %>
      <%= refinery_help_tag t('.help.restricted') %>
    </span>
    <%= f.check_box :restricted %>
    <%= f.label :restricted, t('.yes_make_this_setting_restricted'), :class => 'stripped' %>
  <% end %>
  </div>
  <div class='field'>
    <% if @refinery_setting.form_value_type == 'check_box' -%>
      <h3><%= @refinery_setting.name.titleize %>?</h3>
    <% else %>
      <%= f.label :value %>
    <% end -%>
    <%= f.send(form_value_type, :value, :value => @refinery_setting.form_value,
                                :class => ("widest" if form_value_type == 'text_area'),
                                :rows => (5 if form_value_type == 'text_area')) %>
    <%= f.label :value, help, :class => 'stripped' if @refinery_setting.form_value_type == 'check_box' %>
  </div>

  <%= render :partial => "/shared/admin/form_actions",
             :locals => {
               :f => f,
               :continue_editing => false,
               :hide_cancel => from_dialog?,
               :submit_button_title => t('.restart_may_be_in_order'),
               :delete_title => t('admin.refinery_settings.delete'),
               :delete_confirmation => t('shared.admin.delete.message',
                                         :title => @refinery_setting.name.to_s.titleize),
               :hide_delete => (@refinery_setting.new_record? or !@refinery_setting.destroyable)
              } %>
<% end -%>
